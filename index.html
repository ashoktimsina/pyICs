<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>PyICs by jakobherpich</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>PyICs</h1>
        <p>An initial conditions creator for isolated galaxy formation simulations.</p>

        <p class="view"><a href="https://github.com/jakobherpich/pyICs">View the Project on GitHub <small>jakobherpich/pyICs</small></a></p>


        <ul>
          <li><a href="https://github.com/jakobherpich/pyICs/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/jakobherpich/pyICs/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/jakobherpich/pyICs">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="pyics-documentation" class="anchor" href="#pyics-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>pyICs documentation</h1>

<p>Here you can find the documentation of my <a href="http://github.com/jakobherpich/pyICs">pyICs</a> code.</p>

<h2>
<a id="what-is-pyics" class="anchor" href="#what-is-pyics" aria-hidden="true"><span class="octicon octicon-link"></span></a>What is pyICs?</h2>

<p><a href="http://github.com/jakobherpich/pyICs">pyICs</a> is a python package to create initial condition files for N-body simulations of the formation of isolated galaxies. It generates dark matter halos (DM) in dynamical equilibrium which host a rotating gas sphere. The DM particle velocities are drawn from the equilibrium distribution function (Kazantzidis et al. 2004 ApJ, 601, 37). The gas sphere has a Bullock et al. (2001 ApJ, 555, 240) angular momentum profile. The DM and the gas share the same 3D radial density profile. The code natively supports the αβγ-models: ρ ~ (r/a)<sup>-γ</sup>[1+(r/a)<sup>α</sup>]<sup>(γ-β)/α</sup>. If γ &lt;= 3, the profiles are smoothly truncated outside the virial radius.</p>

<p>The radial profile can be arbitrary as long as python functions for the profile itself and its first and second derivative with radius are given.</p>

<h2>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Installation</h2>

<p>If you have pyhton configured with distutils the following should get you started:</p>

<pre><code>$ git clone https://github.com/jakobherpich/pyICs.git
$ cd pyICs
$ python setup.py install
$ cd ..
$ python
&gt;&gt;&gt; import pynbody
</code></pre>

<h2>
<a id="using-the-code" class="anchor" href="#using-the-code" aria-hidden="true"><span class="octicon octicon-link"></span></a>Using the code</h2>

<h3>
<a id="the-simple-way" class="anchor" href="#the-simple-way" aria-hidden="true"><span class="octicon octicon-link"></span></a>The simple way</h3>

<p>Use the alpha-beta-gamma models. In this case the only thing you need to do, is to specify the the values for α, β and γ:</p>

<pre><code>&gt;&gt;&gt; from pyICs.convenience import create_ics
&gt;&gt;&gt; pars = {'alpha': 1., 'beta': 3., 'gamma': 1., 'c': 10.}
&gt;&gt;&gt; myhalo = creat_ics(pars=pars)
</code></pre>

<p>This piece of code will create a 10<sup>12</sup> Msol halo with an NFW density profile and a spin parameter of 0.04. The initial conditions file will be saved in the working directory as <code>halo.out</code>. The default parameters can be changed (see <a href="#parameters">Parameters</a>).</p>

<h3>
<a id="the-versatile-way" class="anchor" href="#the-versatile-way" aria-hidden="true"><span class="octicon octicon-link"></span></a>The versatile way</h3>

<p>You can also define the density profile yourself. In this case you have to specify the corresponding first and second derivative as these are needed to compute the distribution function of the stable halo. Note that the profiles do not need to be properly normalized as this will be done by the code according to a specified virial mass of the halo (The default value is 10<sup>12</sup> Msol with Hubble constant h=0.7 and mean overdensity &lt;rho&gt;/rho_crit(h)=200.). All three of these functions must accept two arguments: radius (array like), pars (python dictionary with possible parameters, can be empty <code>{}</code>)</p>

<pre><code>import numpy as np
&gt;&gt;&gt; from pyICs.convenience import create_ics
&gt;&gt;&gt; def rho(r, pars):
    sig = pars['sig']
    return np.exp(-0.5*r**2/sig**2)
&gt;&gt;&gt; def drhodr(r, pars):
    sig = pars['sig']
    return -r/sig**2*rho(r, pars)
&gt;&gt;&gt; def d2rhodr2(r, pars):
    sig = pars['sig']
    return -1./sig**2*rho(r, pars)-r/sig**2*drhodr(r, pars)
&gt;&gt;&gt; pars = {'sig': 10}
&gt;&gt;&gt; sim = create_ics(profile=rho, drhodr=drhodr, d2rhodr2=d2rhodr2, pars=pars, length_unit='1 kpc')
</code></pre>

<p>Again the resulting initial conditions file will be saved as <code>halo.out</code>.</p>

<h2>
<a id="parameters" class="anchor" href="#parameters" aria-hidden="true"><span class="octicon octicon-link"></span></a>Parameters</h2>

<p>Here we present a list of the most important parameters to be passed to the code in <code>key=value</code> style:</p>

<table>
<thead>
<tr>
<th align="left">Key</th>
<th align="left">Default</th>
<th align="left">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left"><code>m_vir</code></td>
<td align="left"><code>'1e12 Msol'</code></td>
<td align="left">The virial mass of the halo. Can be string with units or a float (then units are Msol)</td>
</tr>
<tr>
<td align="left"><code>profile</code></td>
<td align="left">αβγ</td>
<td align="left">A python function for the density profile as a function of radius, can have arbitrary normalization and must accept two arguments: radius and a python dictionary with function parameters (key <code>'c'</code> is reserved for halo concentration of αβγ-models)</td>
</tr>
<tr>
<td align="left"><code>drhodr</code></td>
<td align="left">dαβγ/dr</td>
<td align="left">The derivative of <code>profile</code>, must have same normalization as <code>profile</code> and use the same parameter dictionary</td>
</tr>
<tr>
<td align="left"><code>d2rhodr2</code></td>
<td align="left">d<sup>2</sup>αβγ/dr<sup>2</sup>
</td>
<td align="left">The 2nd derivative of <code>profile</code>, must have same normalization as <code>profile</code> and use the same parameter dictionary</td>
</tr>
<tr>
<td align="left"><code>pars</code></td>
<td align="left">NFW with exponential cutoff</td>
<td align="left">Python dictionary that is passed as 2<sup>nd</sup> argument to <code>profile</code>, <code>drhodr</code> and <code>d2rhodr2</code>
</td>
</tr>
<tr>
<td align="left"><code>n_particles</code></td>
<td align="left"><code>1e5</code></td>
<td align="left">Number of gas and DM particles respectively</td>
</tr>
<tr>
<td align="left"><code>n_gas_particles</code></td>
<td align="left"><code>n_particles</code></td>
<td align="left">Number of gas particles (overwrites value set by <code>n_particles</code>, implementation not yet thoroughly tested)</td>
</tr>
<tr>
<td align="left"><code>f_bary</code></td>
<td align="left"><code>0.1</code></td>
<td align="left">Gas mass fraction</td>
</tr>
<tr>
<td align="left"><code>mu</code></td>
<td align="left"><code>1.3</code></td>
<td align="left">Shape parameter for Bullock+2001 angular momentum profile</td>
</tr>
<tr>
<td align="left"><code>spin_parameter</code></td>
<td align="left"><code>0.04</code></td>
<td align="left">Spin parameter initial halo</td>
</tr>
<tr>
<td align="left"><code>f_name</code></td>
<td align="left"><code>'halo.out'</code></td>
<td align="left">Filename of initial conditions file</td>
</tr>
</tbody>
</table>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/jakobherpich">jakobherpich</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
