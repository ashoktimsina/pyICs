{"name":"PyICs","tagline":"An initial conditions creator for isolated galaxy formation simulations.","body":"# pyICs documentation\r\nHere you can find the documentation of my [pyICs](http://github.com/jakobherpich/pyICs) code.\r\n\r\n## What is pyICs?\r\n[pyICs](http://github.com/jakobherpich/pyICs) is a python package to create initial condition files for N-body simulations of the formation of isolated galaxies. It generates dark matter halos (DM) in dynamical equilibrium which host a rotating gas sphere. The DM particle velocities are drawn from the equilibrium distribution function (Kazantzidis et al. 2004 ApJ, 601, 37). The gas sphere has a Bullock et al. (2001 ApJ, 555, 240) angular momentum profile. The DM and the gas share the same 3D radial density profile. The code natively supports the αβγ-models: ρ ~ (r/a)<sup>-γ</sup>[1+(r/a)<sup>α</sup>]<sup>(γ-β)/α</sup>. If γ <= 3, the profiles are smoothly truncated outside the virial radius.\r\n\r\nThe radial profile can be arbitrary as long as python functions for the profile itself and its first and second derivative with radius are given.\r\n\r\n## Installation\r\nIf you have pyhton configured with distutils the following should get you started:\r\n```\r\n$ git clone https://github.com/jakobherpich/pyICs.git\r\n$ cd pyICs\r\n$ python setup.py install\r\n$ cd ..\r\n$ python\r\n>>> import pynbody\r\n```\r\n\r\n## Using the code\r\n\r\n### The simple way\r\nUse the alpha-beta-gamma models. In this case the only thing you need to do, is to specify the the values for α, β and γ:\r\n```\r\n>>> from pyICs.convenience import create_ics\r\n>>> pars = {'alpha': 1., 'beta': 3., 'gamma': 1., 'c': 10.}\r\n>>> myhalo = creat_ics(pars=pars)\r\n```\r\nThis piece of code will create a 10<sup>12</sup> Msol halo with an NFW density profile and a spin parameter of 0.04. The initial conditions file will be saved in the working directory as `halo.out`. The default parameters can be changed (see [Parameters](#parameters)).\r\n\r\n### The versatile way\r\nYou can also define the density profile yourself. In this case you have to specify the corresponding first and second derivative as these are needed to compute the distribution function of the stable halo. Note that the profiles do not need to be properly normalized as this will be done by the code according to a specified virial mass of the halo (The default value is 10<sup>12</sup> Msol with Hubble constant h=0.7 and mean overdensity &lt;rho&gt;/rho_crit(h)=200.). All three of these functions must accept two arguments: radius (array like), pars (python dictionary with possible parameters, can be empty `{}`)\r\n```\r\nimport numpy as np\r\n>>> from pyICs.convenience import create_ics\r\n>>> def rho(r, pars):\r\n    sig = pars['sig']\r\n    return np.exp(-0.5*r**2/sig**2)\r\n>>> def drhodr(r, pars):\r\n    sig = pars['sig']\r\n    return -r/sig**2*rho(r, pars)\r\n>>> def d2rhodr2(r, pars):\r\n    sig = pars['sig']\r\n    return -1./sig**2*rho(r, pars)-r/sig**2*drhodr(r, pars)\r\n>>> pars = {'sig': 10}\r\n>>> sim = create_ics(profile=rho, drhodr=drhodr, d2rhodr2=d2rhodr2, pars=pars, length_unit='1 kpc')\r\n```\r\nAgain the resulting initial conditions file will be saved as `halo.out`.\r\n\r\n## Parameters\r\nHere we present a list of the most important parameters to be passed to the code in `key=value` style:\r\n\r\nKey | Default | Description \r\n:-----|:---------|:-------------\r\n`m_vir`| `'1e12 Msol'` | The virial mass of the halo. Can be string with units or a float (then units are Msol)\r\n`profile`| αβγ | A python function for the density profile as a function of radius, can have arbitrary normalization and must accept two arguments: radius and a python dictionary with function parameters (key `'c'` is reserved for halo concentration of αβγ-models)\r\n`drhodr`| dαβγ/dr | The derivative of `profile`, must have same normalization as `profile` and use the same parameter dictionary \r\n`d2rhodr2` | d<sup>2</sup>αβγ/dr<sup>2</sup> |The 2nd derivative of `profile`, must have same normalization as `profile` and use the same parameter dictionary \r\n`pars`| NFW with exponential cutoff | Python dictionary that is passed as 2<sup>nd</sup> argument to `profile`, `drhodr` and `d2rhodr2` \r\n`n_particles`|`1e5`| Number of gas and DM particles respectively \r\n`n_gas_particles`|`n_particles`| Number of gas particles (overwrites value set by `n_particles`, implementation not yet thoroughly tested)\r\n`f_bary`| `0.1` | Gas mass fraction \r\n`mu`| `1.3` | Shape parameter for Bullock+2001 angular momentum profile \r\n`spin_parameter`|`0.04`|Spin parameter initial halo\r\n`f_name`|`'halo.out'`|Filename of initial conditions file","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}